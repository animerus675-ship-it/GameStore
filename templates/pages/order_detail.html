{% extends "layout/base.html" %}

{% block title %}Order #{{ order.id }}{% endblock %}

{% block content %}
<div class="page-heading header-text">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h3>Order #{{ order.id }}</h3>
      </div>
    </div>
  </div>
</div>

<div class="section">
  <div class="container">
    <p><strong>Date:</strong> {{ order.created_at }}</p>
    <p><strong>Status:</strong> {{ order.status }}</p>
    <p><strong>Total:</strong> ${{ order.total_price }}</p>
    {% if order.status == "new" %}
      <div class="mt-3">
        <a
          href="https://id.kaspi.kz/login"
          target="_blank"
          rel="noopener noreferrer"
          class="btn btn-success"
        >
          Pay with Kaspi
        </a>
        <small class="d-block mt-2 text-muted">Demo payment button: redirects to Kaspi authorization page.</small>
      </div>
    {% endif %}

    <h5 class="mt-4">Items</h5>
    {% if items %}
      <ul class="list-group">
        {% for item in items %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>{{ item.game.title }} x {{ item.quantity }}</span>
            <span>${{ item.price_snapshot }}</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No items found.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
