{% extends "layout/base.html" %}
{% load static %}

{% block title %}Избранное{% endblock %}

{% block content %}
<div class="page-heading header-text">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h3>Избранное</h3>
        <span class="breadcrumb"><a href="{% url 'home' %}">Главная</a> &gt; Избранное</span>
      </div>
    </div>
  </div>
</div>

<div class="section trending">
  <div class="container">
    <div class="row">
      {% for favorite in favorites %}
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="item h-100">
            <a class="game-card-link" href="{% url 'product_detail' favorite.game.slug %}" aria-label="{{ favorite.game.title }}">
              <div class="thumb">
                {% with game=favorite.game %}
                  {% for screenshot in game.screenshots.all %}
                    {% if forloop.first %}
                      <img src="{{ screenshot.image.url }}" alt="{{ screenshot.alt_text|default:game.title }}">
                    {% endif %}
                  {% empty %}
                    <img src="{% static 'theme/assets/images/trending-01.jpg' %}" alt="{{ game.title }}">
                  {% endfor %}
                {% endwith %}
              </div>
              <div class="down-content">
                <h4>{{ favorite.game.title }}</h4>
                <p>Цена: ${{ favorite.game.price }}</p>
                <p>Рейтинг: {{ favorite.average_rating|default_if_none:"0"|floatformat:1 }}</p>
              </div>
            </a>
          </div>
        </div>
      {% empty %}
        <div class="col-lg-12">
          <p>Пока нет избранных игр.</p>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
